<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="GestMatch.MauiApp.Views.MatchDetailPage"
             xmlns:viewmodels="clr-namespace:GestMatch.MauiApp.ViewModels"
             x:DataType="viewmodels:MatchDetailViewModel"
             Title="DÃ©tails du match">

    <ScrollView>
        <VerticalStackLayout Padding="0" Spacing="0">
            
            <!-- Poster Image -->
            <Image Source="{Binding Match.PosterUrl}"
                   Aspect="AspectFill"
                   HeightRequest="250"
                   BackgroundColor="{StaticResource Gray200}"/>
            
            <!-- Match Info -->
            <VerticalStackLayout Padding="20" Spacing="15">
                
                <!-- Teams -->
                <Label Text="{Binding Match.DisplayName}"
                       FontSize="24"
                       FontAttributes="Bold"
                       TextColor="{StaticResource Primary}"/>
                
                <!-- Competition -->
                <Label Text="{Binding Match.Competition}"
                       FontSize="18"
                       TextColor="{StaticResource Secondary}"/>
                
                <!-- Date/Time -->
                <HorizontalStackLayout Spacing="5">
                    <Label Text="ðŸ“…"
                           FontSize="16"/>
                    <Label Text="{Binding Match.DateTimeDisplay}"
                           FontSize="16"
                           TextColor="{StaticResource Gray900}"/>
                </HorizontalStackLayout>
                
                <!-- Location -->
                <HorizontalStackLayout Spacing="5">
                    <Label Text="ðŸ“"
                           FontSize="16"/>
                    <Label FontSize="16" TextColor="{StaticResource Gray900}">
                        <Label.FormattedText>
                            <FormattedString>
                                <Span Text="{Binding Match.Stadium}"/>
                                <Span Text=" â€¢ "/>
                                <Span Text="{Binding Match.City}"/>
                            </FormattedString>
                        </Label.FormattedText>
                    </Label>
                </HorizontalStackLayout>
                
                <!-- Price -->
                <Frame BorderColor="{StaticResource Primary}" 
                       Padding="15" 
                       Margin="0,10,0,0"
                       HasShadow="False">
                    <Grid ColumnDefinitions="*,Auto">
                        <Label Grid.Column="0"
                               Text="Prix du billet"
                               FontSize="16"
                               VerticalOptions="Center"/>
                        <Label Grid.Column="1"
                               Text="{Binding Match.PriceDisplay}"
                               FontSize="20"
                               FontAttributes="Bold"
                               TextColor="{StaticResource Success}"
                               VerticalOptions="Center"/>
                    </Grid>
                </Frame>
                
                <!-- Tickets Remaining -->
                <Label HorizontalOptions="Center"
                       FontSize="14"
                       TextColor="{StaticResource Gray600}">
                    <Label.FormattedText>
                        <FormattedString>
                            <Span Text="{Binding Match.TicketsRemaining}"/>
                            <Span Text=" billets disponibles"/>
                        </FormattedString>
                    </Label.FormattedText>
                </Label>
                
                <!-- Buy Button -->
                <Button Text="Acheter un billet"
                        Command="{Binding BuyTicketCommand}"
                        IsEnabled="{Binding IsLoading, Converter={StaticResource InvertedBoolConverter}}"
                        HorizontalOptions="Fill"
                        Margin="0,20,0,0"
                        FontSize="18"
                        HeightRequest="50"/>
                
            </VerticalStackLayout>
            
        </VerticalStackLayout>
    </ScrollView>
    
</ContentPage>
